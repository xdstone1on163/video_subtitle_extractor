# 字幕图片文字识别系统

这个应用程序使用AWS Bedrock的大语言模型来从S3存储的字幕截图中提取文字。

## 功能特点

- 浏览S3存储桶中的图片
- 支持多种语言的字幕识别 (SA、JP、KR、FR、IT、DE、UA、TR)
- 支持多种AWS Bedrock模型 (Claude 3系列和Nova系列)
- 简洁易用的Gradio界面

## 安装说明

### 前提条件

- Python 3.8 或更高版本
- AWS账户，并已启用Bedrock服务权限
- 有权访问的S3存储桶，包含字幕截图

### 步骤1: 安装依赖

```bash
pip install -r requirements.txt
```

### 步骤2: 配置AWS凭证

确保已经配置好AWS凭证，可以通过以下方式之一：

**方式1: 使用AWS CLI配置**

```bash
aws configure
```

然后输入您的AWS访问密钥ID、秘密访问密钥、默认区域和输出格式。

**方式2: 设置环境变量**

```bash
export AWS_ACCESS_KEY_ID=你的访问密钥ID
export AWS_SECRET_ACCESS_KEY=你的秘密访问密钥
export AWS_DEFAULT_REGION=us-east-1  # 或您的Bedrock服务所在区域
```

### 步骤3: 启动应用

```bash
python app.py
```

启动后，应用将在本地运行，通常可以通过浏览器访问 http://127.0.0.1:7860 打开界面。

## 使用指南

1. 在"S3存储路径"文本框中输入您的S3存储桶路径，格式为：`bucket-name/folder/`
2. 点击"浏览S3图片"按钮加载图片列表
3. 在图库中选择需要识别的字幕图片
4. 选择合适的Bedrock模型和字幕语言
5. 点击"提取文字"按钮开始OCR处理
6. 识别结果将显示在左侧的文本框中

## 语言代码对照表

| 代码 | 语言 |
|------|------|
| SA | 梵文/阿拉伯语 |
| JP | 日语 |
| KR | 韩语 |
| FR | 法语 |
| IT | 意大利语 |
| DE | 德语 |
| UA | 乌克兰语 |
| TR | 土耳其语 |

## 故障排除

- 如果遇到AWS凭证错误，请检查凭证设置是否正确，以及是否有足够的权限
- 如果无法获取S3图片列表，请检查S3路径格式和访问权限
- 如果OCR结果不准确，尝试调整为不同的模型，或确保图片质量清晰

## 注意事项

- 使用AWS Bedrock服务会产生相应费用，请注意控制使用量
- 建议使用低延迟、高质量的图片以获得最佳OCR效果
- 某些语言可能在特定模型上效果更好，可以尝试不同组合
